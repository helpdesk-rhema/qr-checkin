<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>QR Check-In Debug</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/html5-qrcode"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        text-align: center;
      }
      #qr-reader {
        width: 100%;
        max-width: 400px;
        margin: auto;
      }
      #result {
        margin-top: 20px;
        font-size: 18px;
      }
    </style>
  </head>
  <body>
    <h2>QR Scanner Debug</h2>
    <div id="qr-reader"></div>
    <div id="result">Initializing...</div>

    <script>
      console.log("üîß Starting QR scanner...");

      const html5QrCode = new Html5Qrcode("qr-reader");

      Html5Qrcode.getCameras()
        .then(devices => {
          if (devices && devices.length) {
            const cameraId = devices[0].id;
            console.log("üì∏ Using camera:", cameraId);

            html5QrCode.start(
              cameraId,
              { fps: 10, qrbox: 250 },
              decodedText => {
                console.log("‚úÖ QR Code scanned:", decodedText);
                document.getElementById("result").innerText = "‚úÖ " + decodedText;
                html5QrCode.stop();
              },
              errorMessage => {
                console.warn("Scan error:", errorMessage);
              }
            );
          } else {
            console.warn("‚ùå No cameras found.");
            document.getElementById("result").innerText = "‚ùå No cameras found.";
          }
        })
        .catch(err => {
          console.error("‚ùå Error fetching cameras:", err);
          document.getElementById("result").innerText = "‚ùå Error: " + err;
        });
    </script>
  </body>
</html>
